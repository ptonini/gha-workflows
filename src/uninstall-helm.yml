name: uninstall

concurrency:
  group: uninstall

on:
  workflow_dispatch: ~

permissions:
  id-token: write
  contents: read

jobs:
  uninstall_release:
    uses: ptonini/gha-workflows/.github/workflows/uninstall-helm-release.yaml@main
    with:
      vault_k8s_role_path: ${{ vars.vault_k8s_role_path }}
      aws_role: ${{ vars.aws_role }}
      aws_eks_cluster: ${{ vars.aws_eks_role }}
    secrets:
      OPENVPN_CONFIG: ${{ secrets.OPENVPN_CONFIG }}